<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Basic Example</title>
  </head>
  <body>
    <h1>Basic Example</h1>
    <div id="container"></div>
    <script src="https://cdn.jsdelivr.net/npm/vue@2.5.21/dist/vue.js"></script>
    <script src="https://unpkg.com/babel-standalone@6.26.0/babel.min.js"></script>
    <script src="/vue-styled-components.js"></script>
    <script type="text/babel">

    // Create a global style
    styled.injectGlobal`
      body {
        background-color: #fefefe;
      }
    `;

    const animation = styled.keyframes`
        from {
          transform: rotate(0deg);
        }

        to {
          transform: rotate(360deg);
        }
      `;

    const VueComponent = {
      functional: true,
      render: function (createElement, context) {
        // Transparently pass any attributes, event listeners, children, etc.
        return createElement('button', context.data, context.children)
      }
    }

    const StyledVueComponent = styled.default(VueComponent)``

    // Create a <CustomTitle> vue component that renders an <h1> which is
    // centered, palevioletred and sized at 1.5em
    const CustomTitle = styled.default('h1', { animate: Boolean })`
      font-size: 2em;
      text-align: center;
      color: ${props => props.theme.primary};

      @supports (-webkit-text-stroke: 1px) {
        -webkit-text-stroke: 2px ${props => props.theme.primary};
        color: transparent
      }

      ${props => props.animate &&
        `animation: ${animation} 2s linear infinite;`
      }
    `;

    const H2 = CustomTitle.withComponent('h2')

    // Create a <Wrapper> vue component that renders a <section> with
    // some padding and a papayawhip background
    const Wrapper = styled.default.section`
      padding: 4em;
      background: ${props => props.theme.secondary};
    `;

    const W2 = Wrapper.extend`
      background: ${props => props.theme.tertiary};
    `;

    const W3 = styled.default(W2)`
      &:hover {
        background: ${props => props.theme.primary};
      }
    `

    const StyledInput = styled.default.input`
      display: block;
      width: 100%;
      height: 60px;
      border: solid 1px ${props => props.theme.primary};
    `

    const Btn = styled.default('button', { visible: Boolean })`
      background-color: red;
      opacity: ${props => props.visible ? 1: 0};
    `

    const SuperBtn = styled.default(Btn, { visible: Boolean, big: Boolean })`
      font-size: ${props => props.big ? 22 : 18}px;
    `

    new Vue({
      el: '#container',
      data: {
        text: 'Hello World, this is my first styled component!'
      },
      methods: {
        input(e) {
          console.log(e.target.value)
          this.text += e.target.value
        }
      },
      template: `
      <theme-provider :theme="{
        primary: 'palevioletred',
        secondary: 'papayawhip',
        tertiary: 'goldenrod'
      }">
        <wrapper color="salmon">
          <custom-title> {{text}} </custom-title>
          <styled-input
            v-bind:value="text"
            v-on:input="text = $event.target.value"
          />
          <input
            v-bind:value="text"
            v-on:input="text = $event.target.value"
          />
          <btn visible> Button </btn>
          <styled-vue-component>ciao</styled-vue-component>
        </wrapper>
      </theme-provider>`,
      components: {
        'custom-title': H2,
        wrapper: W2,
        btn: SuperBtn,
        StyledVueComponent,
        'styled-input': StyledInput,
        'theme-provider': styled.ThemeProvider,
      },
    });
    </script>
  </body>
</html>
